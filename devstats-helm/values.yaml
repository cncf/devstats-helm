# ARTWORK
# Secrets that can be set via files in `./secrets/*.secret`, via command line by `--set 'pgAdminUser=xyz,pgHost=host.com,...'` or even uncomment them in the lines below.
# pgAdminUser: ''
# pgHost: ''
# pgHostRO: ''
# pgPass: ''
# pgPassRO: ''
# pgPassTeam: ''
# pgPassRep: ''
# githubOAuth: ''
# grafanaUser: ''
# grafanaPassword: ''
#
# You can skip some parts of the deployment (useful when deploying partailly again)
# skipBootstrap (will not run initial bootstrapping - creating logs and users, but you don't need to skip it - bootstrap pod detects already created resources)
# skipCrons (will not create new cronjobs, you should set it when cron jobs are already created, if you want to recreate cron jobs, delete existing ones first and do not set this flag)
# skipGrafanas (will not create Grafana deployments)
# skipPVs (will not attempt to create persistent volume claims, this is usually needed to avoid creating existing resource)
# skipProvisions (will not create provisioning pods, usually not needed, provisioning pod will detect already provisioned projects and only provision new ones)
# skipSecrets (will not attempt to create secrets, if you want to create new secrets delete current secrets first and do not set this flag)
# skipServices (will not attempt to create services (Load Balancers))
# skipPostgres (will not attempt to create patroni postgres)
# skipIngress (will not attempt to create ingress)
# skipBootstrap: 1
# skipCrons: 1
# skipGrafanas: 1
# skipPVs: 1
# skipProvisions: 1
# skipSecrets: 1
# skipServices: 1
# skipPostgres: 1
# skipIngress: 1
# skipStatic: 1
#
# You can overwrite the number of CPU autodetected in each pod, setting this to 1 will make each pod single-threaded
# nCPUs: 0
#
# Other evrironment options
# bootstrapCommand: 'sleep'
# bootstrapCommandArgs:
#   - "36000"
#   - "bootarg"
# cmdDebug: 1
# debug: 1
# excludeVars: 'projects_health_partial_html'
# forceComputeAll: 1
# githubDebug: 1
# grafanaCommandArgs:
#   - "36000"
#   - arg2
# onlyMetrics: 'events,tz'
# overwritePostgresCommand: true
# postgresCommand: 'sleep'
# postgresCommandArgs:
#   - "36000"
# postgresImageName: 'jberkus/simple-patroni:v3'
# postgresImageName: 'lukaszgryglicki/devstats-patroni'
# periods: 'd7:t,m:f,q:t,y10:f'
# projectsOverride: '+cncf,+opencontainers,+istio,+knative,+zephyr,+linux,+nodejs'
# provisionCommand: './devstats-helm/repos.sh'
# provisionCommand: './devstats-helm/affs.sh'
# provisionCommand: './devstats-helm/vars.sh'
# provisionCommand: './devstats-helm/health.sh'
# provisionCommand: './devstats-helm/clear_devstats_running_flag.sh'
# provisionCommand: './devstats-helm/set_provisioned_flag.sh'
# provisionCommand: './devstats-helm/add_metric.sh'
# provisionCommand: 'sleep'
# provisionCommandArgs:
#   - "36000"
# queryOut: 1
# reposDir: "/root/devstats_repos/"
# runTests: true
# skipMetrics: 'users_activity,committers_cum'
# skipMetrics: 'projects_health'
# https://itnext.io/efs-persistent-volumes-on-aws-kubernetes-193e0035bbfb
# storageAccessModes: ReadWriteMany
# storageClass: efs
# storageClass: gp2
# syncCommandArgs:
#   - "syncarg"
affiliations: 'github_users.json'
appNodeSelector:
  node: devstats-app
dbNodeSelector:
  node2: devstats-db
bootstrapCommand: './devstats-helm/deploy_all.sh'
bootstrapLDrop: ''
bootstrapNoCreate: ''
bootstrapPodName: devstats-provision-bootstrap
bootstrapRestartPolicy: Never
bootstrapUDrop: ''
companyAcq: "companies.yaml"
concurrencyPolicy: Forbid
domains:
  - name: 'teststats.cncf.io'
    image: 'lukaszgryglicki/devstats-static-test'
    shortname: test
  - name: 'devstats.cncf.io'
    image: 'lukaszgryglicki/devstats-static-prod'
    shortname: prod
  - name: 'devstats.cd.foundation'
    image: 'lukaszgryglicki/devstats-static-cdf'
    shortname: cdf
  - name: 'devstats.graphql.org'
    image: 'lukaszgryglicki/devstats-static-graphql'
    shortname: graphql
fullnameOverride: devstats
grafanaCommand: 'grafana_start.sh'
grafanaImage: 'lukaszgryglicki/devstats-grafana'
grafanaMaxSurge: 1
grafanaMaxUnavailable: 1
grafanaNReplicas: 1
grafanaPodName: devstats-grafana
grafanaPort: 3000
grafanaRestartPolicy: Always
grafanaSecret: grafana-secret
imagePullPolicy: Always
indexCronsFrom: 0
indexCronsTo: 100
indexDomainsFrom: 0
indexDomainsTo: 4
indexGrafanasFrom: 0
indexGrafanasTo: 100
indexIngressesFrom: 0
indexIngressesTo: 100
indexProvisionsFrom: 0
indexProvisionsTo: 100
indexPVsFrom: 0
indexPVsTo: 100
indexServicesFrom: 0
indexServicesTo: 100
indexStaticsFrom: 0
indexStaticsTo: 4
limitsBootstrapCPU: '8000m'
limitsBootstrapMemory: '16Gi'
limitsCronsCPU: '48000m'
limitsCronsMemory: '128Gi'
limitsGrafanasCPU: '16000m'
limitsGrafanasMemory: '32Gi'
limitsPostgresCPU: '56000m'
limitsPostgresMemory: '380Gi'
limitsProvisionsCPU: '48000m'
limitsProvisionsMemory: '128Gi'
name: devstats
nameOverride: devstats
oauthSecret: github-oauth
pgSecret: pg-db
proivisionImage: 'lukaszgryglicki/devstats'
projectsFile: 'devstats-helm/projects.yaml'
projectsOverride: ''
provisionCommand: './devstats-helm/deploy_all.sh'
provisionPodName: devstats-provision
provisionRestartPolicy: Never
postgresSvcName: 'devstats-postgres'
postgresImageName: 'lukaszgryglicki/devstats-patroni'
postgresStorageSize: '2800Gi'
postgresNodes: 4
pvName: devstats-pvc
requestsBootstrapCPU: '1000m'
requestsBootstrapMemory: '1Gi'
requestsCronsCPU: '1000m'
requestsCronsMemory: '2Gi'
requestsGrafanasCPU: '1000m'
requestsGrafanasMemory: '2Gi'
requestsPostgresCPU: '6000m'
requestsPostgresMemory: '32Gi'
requestsProvisionsCPU: '6000m'
requestsProvisionsMemory: '16Gi'
secretType: Opaque
servicePodName: devstats-service
storageAccessModes: ReadWriteOnce
storageClass: default
skipTemp: 1
staticImage: 'lukaszgryglicki/devstats-static-default'
staticNReplicas: 1
syncCommand: devstats
syncImage: 'lukaszgryglicki/devstats-minimal'
syncPodName: devstats
syncRestartPolicy: Never
testsImage: 'lukaszgryglicki/devstats-test'
testsPodName: devstats-tests
testsRestartPolicy: Never
volumeMountName: data
volumeMountPath: '/root'
volumeName: data
useFlags: ''
useBootstrapResourcesLimits: 1
useCronsResourcesLimits: 1
useGrafanasResourcesLimits: 1
useProvisionsResourcesLimits: 1
usePostgresResourcesLimits: 1
waitForBootstrap: 120
waitForPostgres: 30
projects:
  - proj: kubernetes
    db: gha
    icon: 'k8s'
    org: 'Kubernetes'
    repo: 'kubernetes/kubernetes'
    cron: '7 * * * *'
    disk: 50Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-1'
    i: 0
  - proj: prometheus
    db: prometheus
    icon: 'prometheus'
    org: 'Prometheus'
    repo: 'prometheus/prometheus'
    cron: '8 * * * *'
    disk: 5Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-3'
    i: 1
  - proj: opentracing
    db: opentracing
    icon: 'opentracing'
    org: 'OpenTracing'
    repo: 'opentracing/opentracing-go'
    cron: '8 * * * *'
    disk: 3Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-4'
    i: 2
  - proj: fluentd
    db: fluentd
    icon: 'fluentd'
    org: 'Fluentd'
    repo: 'fluent/fluentd'
    cron: '9 * * * *'
    disk: 4Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-5'
    i: 3
  - proj: linkerd
    db: linkerd
    icon: 'linkerd'
    org: 'Linkerd'
    repo: 'linkerd/linkerd'
    cron: '9 * * * *'
    disk: 4Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-6'
    i: 4
  - proj: grpc
    db: grpc
    icon: 'grpc'
    org: 'gRPC'
    repo: 'grpc/grpc'
    cron: '10 * * * *'
    disk: 4Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-7'
    i: 5
  - proj: coredns
    db: coredns
    icon: 'coredns'
    org: 'CoreDNS'
    repo: 'coredns/coredns'
    cron: '10 * * * *'
    disk: 4Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-9'
    i: 6
  - proj: containerd
    db: containerd
    icon: 'containerd'
    org: 'containerd'
    repo: 'containerd/containerd'
    cron: '11 * * * *'
    disk: 3Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-10'
    i: 7
  - proj: rkt
    db: rkt
    icon: 'rkt'
    org: 'rkt'
    repo: 'rkt/rkt'
    cron: '11 * * * *'
    disk: 3Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-11'
    i: 8
  - proj: cni
    db: cni
    icon: 'cni'
    org: 'CNI'
    repo: 'containernetworking/cni'
    cron: '11 * * * *'
    disk: 3Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-12'
    i: 9
  - proj: envoy
    db: envoy
    icon: 'envoy'
    org: 'Envoy'
    repo: 'envoyproxy/envoy'
    cron: '12 * * * *'
    disk: 4Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-13'
    i: 10
  - proj: jaeger
    db: jaeger
    icon: 'jaeger'
    org: 'Jaeger'
    repo: 'jaegertracing/jaeger'
    cron: '12 * * * *'
    disk: 4Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-14'
    i: 11
  - proj: notary
    db: notary
    icon: 'notary'
    org: 'Notary'
    repo: 'theupdateframework/notary'
    cron: '13 * * * *'
    disk: 3Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-15'
    i: 12
  - proj: tuf
    db: tuf
    icon: 'tuf'
    org: 'TUF'
    repo: 'theupdateframework/tuf'
    cron: '13 * * * *'
    disk: 3Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-16'
    i: 13
  - proj: rook
    db: rook
    icon: 'rook'
    org: 'Rook'
    repo: 'rook/rook'
    cron: '13 * * * *'
    disk: 4Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-17'
    i: 14
  - proj: vitess
    db: vitess
    icon: 'vitess'
    org: 'Vitess'
    repo: 'vitessio/vitess'
    cron: '14 * * * *'
    disk: 5Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-18'
    i: 15
  - proj: nats
    db: nats
    icon: 'nats'
    org: 'NATS'
    repo: 'nats-io/gnatsd'
    cron: '14 * * * *'
    disk: 5Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-21'
    i: 16
  - proj: opa
    db: opa
    icon: 'opa'
    org: 'OPA'
    repo: 'open-policy-agent/opa'
    cron: '14 * * * *'
    disk: 5Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-22'
    i: 17
  - proj: spiffe
    db: spiffe
    icon: 'spiffe'
    org: 'SPIFFE'
    repo: 'spiffe/spiffe'
    cron: '15 * * * *'
    disk: 4Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-23'
    i: 18
  - proj: spire
    db: spire
    icon: 'spire'
    org: 'SPIRE'
    repo: 'spiffe/spire'
    cron: '15 * * * *'
    disk: 3Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-24'
    i: 19
  - proj: cloudevents
    db: cloudevents
    icon: 'cloudevents'
    org: 'CloudEvents'
    repo: 'cloudevents/spec'
    cron: '15 * * * *'
    disk: 3Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-25'
    i: 20
  - proj: telepresence
    db: telepresence
    icon: 'telepresence'
    org: 'Telepresence'
    repo: 'telepresenceio/telepresence'
    cron: '15 * * * *'
    disk: 3Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-26'
    i: 21
  - proj: helm
    db: helm
    icon: 'helm'
    org: 'Helm'
    repo: 'helm/helm'
    cron: '16 * * * *'
    disk: 8Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-27'
    i: 22
  - proj: openmetrics
    db: openmetrics
    icon: 'openmetrics'
    org: 'OpenMetrics'
    repo: 'OpenObservability/OpenMetrics'
    cron: '16 * * * *'
    disk: 3Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-28'
    i: 23
  - proj: harbor
    db: harbor
    icon: 'harbor'
    org: 'Harbor'
    repo: 'goharbor/harbor'
    cron: '17 * * * *'
    disk: 4Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-29'
    i: 24
  - proj: etcd
    db: etcd
    icon: 'etcd'
    org: 'etcd'
    repo: 'etcd-io/etcd'
    cron: '17 * * * *'
    disk: 4Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-30'
    i: 25
  - proj: tikv
    db: tikv
    icon: 'tikv'
    org: 'TiKV'
    repo: 'tikv/tikv'
    cron: '17 * * * *'
    disk: 3Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-31'
    i: 26
  - proj: cortex
    db: cortex
    icon: 'cortex'
    org: 'Cortex'
    repo: 'cortexproject/cortex'
    cron: '18 * * * *'
    disk: 3Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-32'
    i: 27
  - proj: buildpacks
    db: buildpacks
    icon: 'buildpacks'
    org: 'Buildpacks'
    repo: 'buildpack/lifecycle'
    cron: '18 * * * *'
    disk: 3Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-33'
    i: 28
  - proj: falco
    db: falco
    icon: 'falco'
    org: 'Falco'
    repo: 'falcosecurity/falco'
    cron: '18 * * * *'
    disk: 3Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-34'
    i: 29
  - proj: dragonfly
    db: dragonfly
    icon: 'dragonfly'
    org: 'Dragonfly'
    repo: 'dragonflyoss/Dragonfly'
    cron: '19 * * * *'
    disk: 3Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-35'
    i: 30
  - proj: virtualkubelet
    db: virtualkubelet
    icon: 'virtualkubelet'
    org: 'Virtual Kubelet'
    repo: 'virtual-kubelet/virtual-kubelet'
    cron: '19 * * * *'
    disk: 3Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-36'
    i: 31
  - proj: cncf
    db: cncf
    icon: 'cncf'
    org: 'CNCF'
    repo: 'cncf/landscapeapp'
    cron: '19 * * * *'
    disk: 30Gi
    domains: [1, 0, 0, 0]
    ga: 'UA-108085315-8'
    i: 32
  - proj: opencontainers
    db: opencontainers
    icon: 'opencontainers'
    org: 'OCI'
    repo: 'opencontainers/runc'
    cron: '20 * * * *'
    disk: 3Gi
    domains: [1, 0, 0, 0]
    ga: 'UA-108085315-19'
    i: 33
  - proj: istio
    db: istio
    icon: 'cncf'
    org: 'Istio'
    repo: 'istio/istio'
    cron: '20 * * * *'
    disk: 8Gi
    domains: [1, 0, 0, 0]
    ga: ''
    i: 34
  - proj: spinnaker
    db: spinnaker
    icon: 'spinnaker'
    org: 'Spinnaker'
    repo: 'spinnaker/spinnaker'
    cron: '20 * * * *'
    disk: 4Gi
    domains: [0, 0, 1, 0]
    ga: 'UA-108085315-38'
    i: 35
  - proj: knative
    db: knative
    icon: 'cncf'
    org: 'Knative'
    repo: 'knative/serving'
    cron: '21 * * * *'
    disk: 4Gi
    domains: [1, 0, 0, 0]
    ga: ''
    i: 36
  - proj: kubeedge
    db: kubeedge
    icon: 'kubeedge'
    org: 'KubeEdge'
    repo: 'kubeedge/kubeedge'
    cron: '21 * * * *'
    disk: 3Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-43'
    i: 37
  - proj: brigade
    db: brigade
    icon: 'brigade'
    org: 'Brigade'
    repo: 'Azure/brigade'
    cron: '21 * * * *'
    disk: 3Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-44'
    i: 38
  - proj: crio
    db: crio
    icon: 'crio'
    org: 'CRI-O'
    repo: 'cri-o/cri-o'
    cron: '22 * * * *'
    disk: 3Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-45'
    i: 39
  - proj: tekton
    db: tekton
    icon: 'tekton'
    org: 'Tekton'
    repo: 'knative/build'
    cron: '22 * * * *'
    disk: 3Gi
    domains: [0, 0, 1, 0]
    ga: 'UA-108085315-39'
    i: 40
  - proj: jenkinsx
    db: jenkinsx
    icon: 'jenkinsx'
    org: 'Jenkins X'
    repo: 'jenkins-x/jx'
    cron: '22 * * * *'
    disk: 6Gi
    domains: [0, 0, 1, 0]
    ga: 'UA-108085315-41'
    i: 41
  - proj: jenkins
    db: jenkins
    icon: 'jenkins'
    org: 'Jenkins'
    repo: 'jenkinsci/jenkins'
    cron: '23 * * * *'
    disk: 40Gi
    domains: [0, 0, 1, 0]
    ga: 'UA-108085315-40'
    i: 42
  - proj: networkservicemesh
    db: networkservicemesh
    icon: 'networkservicemesh'
    org: 'Network Service Mesh'
    repo: 'networkservicemesh/networkservicemesh'
    cron: '23 * * * *'
    disk: 3Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-46'
    i: 43
  - proj: openebs
    db: openebs
    icon: 'openebs'
    org: 'OpenEBS'
    repo: 'openebs/openebs'
    cron: '24 * * * *'
    disk: 10Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-47'
    i: 44
  - proj: opentelemetry
    db: opentelemetry
    icon: 'opentelemetry'
    org: 'OpenTelemetry'
    repo: 'open-telemetry/opentelemetry-java'
    cron: '24 * * * *'
    disk: 3Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-48'
    i: 45
  - proj: graphql
    db: graphql
    icon: 'graphql'
    org: 'GraphQL'
    repo: 'graphql/graphql-js'
    cron: '24 * * * *'
    disk: 30Gi
    domains: [0, 0, 0, 1]
    ga: ''
    i: 46
  - proj: graphqljs
    db: graphqljs
    icon: 'graphqljs'
    org: 'GraphQL JavaScript'
    repo: 'graphql/graphql-js'
    cron: '25 * * * *'
    disk: 3Gi
    domains: [0, 0, 0, 1]
    ga: ''
    i: 47
  - proj: graphiql
    db: graphiql
    icon: 'graphiql'
    org: 'GraphQL IDE'
    repo: 'graphql/graphiql'
    cron: '25 * * * *'
    disk: 3Gi
    domains: [0, 0, 0, 1]
    ga: ''
    i: 48
  - proj: graphqlspec
    db: graphqlspec
    icon: 'graphqlspec'
    org: 'GraphQL Spec'
    repo: 'graphql/graphql-spec'
    cron: '26 * * * *'
    disk: 3Gi
    domains: [0, 0, 0, 1]
    ga: ''
    i: 49
  - proj: expressgraphql
    db: expressgraphql
    icon: 'expressgraphql'
    org: 'Express GraphQL'
    repo: 'graphql/express-graphql'
    cron: '26 * * * *'
    disk: 3Gi
    domains: [0, 0, 0, 1]
    ga: ''
    i: 50
  - proj: all
    db: allprj
    icon: 'cncf'
    org: 'All CNCF'
    repo: ''
    cron: '27 * * * *'
    disk: 150Gi
    domains: [1, 1, 0, 0]
    ga: 'UA-108085315-20'
    i: 51
  - proj: allcdf
    db: allcdf
    icon: 'cdf'
    org: 'All CDF'
    repo: ''
    cron: '28 * * * *'
    disk: 50Gi
    domains: [0, 0, 1, 0]
    ga: 'UA-108085315-42'
    i: 52
  - proj: zephyr
    db: zephyr
    icon: 'cncf'
    org: 'Zephyr'
    repo: 'zephyrproject-rtos/zephyr'
    cron: '29 * * * *'
    disk: 8Gi
    domains: [1, 0, 0, 0]
    ga: ''
    i: 53
  - proj: linux
    db: linux
    icon: 'cncf'
    org: 'Linux'
    repo: 'torvalds/linux'
    cron: '29 * * * *'
    disk: 10Gi
    domains: [1, 0, 0, 0]
    ga: ''
    i: 54
